<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AppleHub - –∫—É–ø–∏—Ç—å AirPods</title>
    <link rel="stylesheet" href="airpods.css">
</head>
<body>
    <header>
        <div class="logo">AppleHub</div>
        <div class="search-container">
            <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ AirPods...">
            
        </div>
        <button class="cart-btn" id="open-cart">
            <span class="cart-icon"></span> –ö–æ—Ä–∑–∏–Ω–∞ 
            <span class="cart-count" id="cart-count">0</span>
        </button>
    </header>

    <main>
        <h1 class="page-title">–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ AirPods</h1>
        <div class="products-grid" id="products-grid">
            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
    </main>

    <div class="overlay" id="overlay"></div>
    <div class="cart-modal" id="cart-modal">
        <div class="cart-header">
            <div class="cart-title">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</div>
            <button class="close-cart" id="close-cart">&times;</button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>–ò—Ç–æ–≥–æ:</span>
                <span id="cart-total">0 ‚ÇΩ</span>
            </div>
            <button class="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö
        const products = [
            {
                id: 1,
                title: "AirPods Pro (2nd generation)",
                price: 23990,
                originalPrice: 26990,
                image: "https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/MQD83?wid=572&hei=572&fmt=jpeg&qlt=95&.v=1660803972361",
                stock: 7,
                model: "Pro 2",
                isNew: true
            },
            {
                id: 2,
                title: "AirPods (3rd generation)",
                price: 17990,
                image: "https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/MME73?wid=572&hei=572&fmt=jpeg&qlt=95&.v=1632861342000",
                stock: 12,
                model: "3rd gen"
            },
            {
                id: 3,
                title: "AirPods Max",
                price: 59990,
                image: "https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/airpods-max-hero-select-202011?wid=470&hei=556&fmt=jpeg&qlt=95&.v=1604022365000",
                stock: 3,
                model: "Max"
            },
            {
                id: 4,
                title: "AirPods (2nd generation)",
                price: 12990,
                image: "https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/MV7N2?wid=572&hei=572&fmt=jpeg&qlt=95&.v=1551489688005",
                stock: 15,
                model: "2nd gen"
            },
            {
                id: 5,
                title: "AirPods Pro (1st generation)",
                price: 19990,
                originalPrice: 23990,
                image: "https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/MWP22?wid=572&hei=572&fmt=jpeg&qlt=95&.v=1591634795000",
                stock: 0,
                model: "Pro 1"
            }
        
        ];

        // –ö–æ—Ä–∑–∏–Ω–∞
        let cart = [];

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const productsGrid = document.getElementById('products-grid');
        const searchInput = document.getElementById('search');
        const cartCount = document.getElementById('cart-count');
        const openCartBtn = document.getElementById('open-cart');
        const closeCartBtn = document.getElementById('close-cart');
        const cartModal = document.getElementById('cart-modal');
        const overlay = document.getElementById('overlay');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
        function displayProducts(productsToDisplay) {
            productsGrid.innerHTML = '';
            
            if (productsToDisplay.length === 0) {
                productsGrid.innerHTML = '<div class="no-results">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å.</div>';
                return;
            }
            
            productsToDisplay.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–∫–∏–¥–∫—É
                const hasDiscount = product.originalPrice && product.originalPrice > product.price;
                const discountPercent = hasDiscount 
                    ? Math.round((1 - product.price / product.originalPrice) * 100)
                    : 0;
                
                productCard.innerHTML = `
                    ${hasDiscount ? `<div class="discount-badge">-${discountPercent}%</div>` : ''}
                    <div class="product-image-container">
                        <img src="${product.image}" alt="${product.title}" class="product-image">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.title}</h3>
                        <span class="product-model">${product.model}</span>
                        ${hasDiscount ? `
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span class="product-price">${product.price.toLocaleString()} ‚ÇΩ</span>
                                <span style="text-decoration: line-through; color: #86868b; font-size: 16px;">
                                    ${product.originalPrice.toLocaleString()} ‚ÇΩ
                                </span>
                            </div>
                        ` : `<p class="product-price">${product.price.toLocaleString()} ‚ÇΩ</p>`}
                        <p class="product-stock ${product.stock > 0 ? 'in-stock' : 'out-of-stock'}">
                            <span class="stock-icon">${product.stock > 0 ? '‚úì' : '‚úó'}</span>
                            ${product.stock > 0 ? `–í –Ω–∞–ª–∏—á–∏–∏: ${product.stock} —à—Ç.` : '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏'}
                        </p>
                        <button class="add-to-cart" data-id="${product.id}" ${product.stock === 0 ? 'disabled' : ''}>
                            <span class="cart-icon"></span>
                            ${product.stock > 0 ? '–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É' : '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏'}
                        </button>
                    </div>
                `;
                
                productsGrid.appendChild(productCard);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', addToCart);
            });
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
        function addToCart(e) {
            const productId = parseInt(e.target.getAttribute('data-id'));
            const product = products.find(p => p.id === productId);
            
            if (!product) return;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä —É–∂–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
                if (existingItem.quantity < product.stock) {
                    existingItem.quantity += 1;
                } else {
                    alert('–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –Ω–∞–ª–∏—á–∏–∏');
                    return;
                }
            } else {
                cart.push({
                    id: product.id,
                    title: product.title,
                    price: product.price,
                    originalPrice: product.originalPrice,
                    image: product.image,
                    quantity: 1,
                    stock: product.stock,
                    model: product.model
                });
            }
            
            updateCart();
            saveCartToLocalStorage();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
            e.target.textContent = '‚úì –î–æ–±–∞–≤–ª–µ–Ω–æ';
            e.target.style.backgroundColor = '#34a853';
            setTimeout(() => {
                e.target.innerHTML = '<span class="cart-icon">üõí</span> –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É';
                e.target.style.backgroundColor = '#0071e3';
            }, 1000);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
        function updateCart() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–∑–∏–Ω—ã
            cartItemsContainer.innerHTML = '';
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p style="text-align: center; color: #86868b;">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
                cartTotal.textContent = '0 ‚ÇΩ';
                return;
            }
            
            let totalPrice = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                totalPrice += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                
                const hasDiscount = item.originalPrice && item.originalPrice > item.price;
                
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.title}" class="cart-item-image">
                    <div class="cart-item-details">
                        <h4 class="cart-item-title">${item.title}</h4>
                        <div class="cart-item-model">${item.model}</div>
                        ${hasDiscount ? `
                            <div style="margin-bottom: 5px;">
                                <span class="cart-item-price">${item.price.toLocaleString()} ‚ÇΩ</span>
                                <span style="text-decoration: line-through; color: #86868b; font-size: 14px; margin-left: 8px;">
                                    ${item.originalPrice.toLocaleString()} ‚ÇΩ
                                </span>
                            </div>
                        ` : `<div class="cart-item-price">${item.price.toLocaleString()} ‚ÇΩ</div>`}
                        <div class="cart-item-quantity">
                            <button class="quantity-btn minus" data-id="${item.id}">‚àí</button>
                            <input type="text" class="quantity-input" value="${item.quantity}" readonly>
                            <button class="quantity-btn plus" data-id="${item.id}" ${item.quantity >= item.stock ? 'disabled' : ''}>+</button>
                        </div>
                        <button class="remove-item" data-id="${item.id}">
                            <span class="trash-icon">üóëÔ∏è</span> –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                `;
                
                cartItemsContainer.appendChild(cartItem);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É
            cartTotal.textContent = `${totalPrice.toLocaleString()} ‚ÇΩ`;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ –∫–æ—Ä–∑–∏–Ω–µ
            document.querySelectorAll('.minus').forEach(button => {
                button.addEventListener('click', decreaseQuantity);
            });
            
            document.querySelectorAll('.plus').forEach(button => {
                button.addEventListener('click', increaseQuantity);
            });
            
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', removeItem);
            });
        }

        // –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞
        function decreaseQuantity(e) {
            const productId = parseInt(e.target.getAttribute('data-id'));
            const item = cart.find(item => item.id === productId);
            
            if (item && item.quantity > 1) {
                item.quantity -= 1;
                updateCart();
                saveCartToLocalStorage();
            } else if (item && item.quantity === 1) {
                removeItem(e);
            }
        }

        // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞
        function increaseQuantity(e) {
            const productId = parseInt(e.target.getAttribute('data-id'));
            const item = cart.find(item => item.id === productId);
            
            if (item && item.quantity < item.stock) {
                item.quantity += 1;
                updateCart();
                saveCartToLocalStorage();
            } else {
                alert('–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –Ω–∞–ª–∏—á–∏–∏');
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
        function removeItem(e) {
            const productId = parseInt(e.target.getAttribute('data-id'));
            cart = cart.filter(item => item.id !== productId);
            updateCart();
            saveCartToLocalStorage();
        }

        // –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
        function searchProducts() {
            const searchTerm = searchInput.value.toLowerCase();
            const filteredProducts = products.filter(product => 
                product.title.toLowerCase().includes(searchTerm) || 
                product.model.toLowerCase().includes(searchTerm)
            );
            displayProducts(filteredProducts);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã –≤ localStorage
        function saveCartToLocalStorage() {
            localStorage.setItem('airpodsCart', JSON.stringify(cart));
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –∏–∑ localStorage
        function loadCartFromLocalStorage() {
            const savedCart = localStorage.getItem('airpodsCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCart();
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            displayProducts(products);
            loadCartFromLocalStorage();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            searchInput.addEventListener('input', searchProducts);
            
            openCartBtn.addEventListener('click', () => {
                cartModal.style.display = 'flex';
                overlay.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
            
            closeCartBtn.addEventListener('click', () => {
                cartModal.style.display = 'none';
                overlay.style.display = 'none';
                document.body.style.overflow = '';
            });
            
            overlay.addEventListener('click', () => {
                cartModal.style.display = 'none';
                overlay.style.display = 'none';
                document.body.style.overflow = '';
            });
            
            // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
            document.querySelector('.checkout-btn')?.addEventListener('click', () => {
                if (cart.length === 0) {
                    alert('–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
                    return;
                }
                alert('–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω! –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É!');
                cart = [];
                updateCart();
                saveCartToLocalStorage();
                cartModal.style.display = 'none';
                overlay.style.display = 'none';
                document.body.style.overflow = '';
            });
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>